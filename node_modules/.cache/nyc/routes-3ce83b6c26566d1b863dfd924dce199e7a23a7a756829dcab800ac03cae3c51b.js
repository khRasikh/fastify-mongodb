function cov_thxyporjj(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js";var hash="7bd163d62a41fafb810a5aec0a0209ff8b10e622";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:2,column:0},end:{line:80,column:2}},"2":{start:{line:3,column:2},end:{line:16,column:4}},"3":{start:{line:11,column:30},end:{line:11,column:62}},"4":{start:{line:12,column:21},end:{line:12,column:66}},"5":{start:{line:13,column:6},end:{line:13,column:22}},"6":{start:{line:14,column:6},end:{line:14,column:39}},"7":{start:{line:18,column:2},end:{line:26,column:5}},"8":{start:{line:19,column:28},end:{line:19,column:60}},"9":{start:{line:20,column:17},end:{line:20,column:55}},"10":{start:{line:25,column:4},end:{line:25,column:16}},"11":{start:{line:28,column:2},end:{line:56,column:4}},"12":{start:{line:37,column:30},end:{line:37,column:62}},"13":{start:{line:38,column:21},end:{line:46,column:7}},"14":{start:{line:49,column:6},end:{line:53,column:7}},"15":{start:{line:50,column:22},end:{line:50,column:73}},"16":{start:{line:51,column:8},end:{line:51,column:27}},"17":{start:{line:52,column:8},end:{line:52,column:20}},"18":{start:{line:54,column:6},end:{line:54,column:39}},"19":{start:{line:58,column:2},end:{line:77,column:4}},"20":{start:{line:66,column:30},end:{line:66,column:63}},"21":{start:{line:67,column:21},end:{line:69,column:8}},"22":{start:{line:70,column:6},end:{line:74,column:7}},"23":{start:{line:71,column:22},end:{line:71,column:73}},"24":{start:{line:72,column:8},end:{line:72,column:27}},"25":{start:{line:73,column:8},end:{line:73,column:20}},"26":{start:{line:75,column:6},end:{line:75,column:39}},"27":{start:{line:79,column:2},end:{line:79,column:9}}},fnMap:{"0":{name:"todoRoutes",decl:{start:{line:2,column:26},end:{line:2,column:36}},loc:{start:{line:2,column:54},end:{line:80,column:1}},line:2},"1":{name:"createTodo",decl:{start:{line:10,column:19},end:{line:10,column:29}},loc:{start:{line:10,column:46},end:{line:15,column:5}},line:10},"2":{name:"readTodos",decl:{start:{line:18,column:39},end:{line:18,column:48}},loc:{start:{line:18,column:65},end:{line:26,column:3}},line:18},"3":{name:"updateTodo",decl:{start:{line:36,column:19},end:{line:36,column:29}},loc:{start:{line:36,column:46},end:{line:55,column:5}},line:36},"4":{name:"deleteTodo",decl:{start:{line:65,column:19},end:{line:65,column:29}},loc:{start:{line:65,column:46},end:{line:76,column:5}},line:65}},branchMap:{"0":{loc:{start:{line:43,column:20},end:{line:43,column:66}},type:"cond-expr",locations:[{start:{line:43,column:49},end:{line:43,column:59}},{start:{line:43,column:62},end:{line:43,column:66}}],line:43},"1":{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:49,column:6},end:{line:53,column:7}}],line:49},"2":{loc:{start:{line:70,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:70,column:6},end:{line:74,column:7}},{start:{line:70,column:6},end:{line:74,column:7}}],line:70}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7bd163d62a41fafb810a5aec0a0209ff8b10e622"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_thxyporjj=function(){return actualCoverage;};}return actualCoverage;}cov_thxyporjj();const schemas=(cov_thxyporjj().s[0]++,require("./schema"));cov_thxyporjj().s[1]++;module.exports=function todoRoutes(app,opts,next){cov_thxyporjj().f[0]++;cov_thxyporjj().s[2]++;app.post("/api/ghost",{schema:{body:schemas.todoInputSchema}},async function createTodo(request,reply){cov_thxyporjj().f[1]++;const todosCollection=(cov_thxyporjj().s[3]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[4]++,await todosCollection.insertOne(request.body));cov_thxyporjj().s[5]++;reply.code(201);cov_thxyporjj().s[6]++;return{id:result.insertedId};});cov_thxyporjj().s[7]++;app.get("/api/ghost",async function readTodos(request,reply){cov_thxyporjj().f[2]++;const todosCollection=(cov_thxyporjj().s[8]++,app.mongo.db.collection("users"));const docs=(cov_thxyporjj().s[9]++,await todosCollection.find().toArray());// return docs.map(d =>
//   // remove the _id field and name it as id
//   d.id = d._id.toString()
//   return d
cov_thxyporjj().s[10]++;return docs;});cov_thxyporjj().s[11]++;app.put("/api/ghost/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_thxyporjj().f[3]++;const todosCollection=(cov_thxyporjj().s[12]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[13]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_thxyporjj().b[0][0]++,new Date()):(cov_thxyporjj().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_thxyporjj().s[14]++;if(result.matchedCount===0){cov_thxyporjj().b[1][0]++;const error=(cov_thxyporjj().s[15]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[16]++;error.status=404;cov_thxyporjj().s[17]++;throw error;}else{cov_thxyporjj().b[1][1]++;}cov_thxyporjj().s[18]++;return{id:request.params.id};});cov_thxyporjj().s[19]++;app.delete("/api/ghost/:id",{schema:{params:schemas.todoIdSchema}},async function deleteTodo(request,reply){cov_thxyporjj().f[4]++;const todosCollection=(cov_thxyporjj().s[20]++,this.mongo.db.collection("users"));const result=(cov_thxyporjj().s[21]++,await todosCollection.deleteOne({_id:this.mongo.ObjectId(request.params.id)}));cov_thxyporjj().s[22]++;if(result.deletedCount===0){cov_thxyporjj().b[2][0]++;const error=(cov_thxyporjj().s[23]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[24]++;error.status=404;cov_thxyporjj().s[25]++;throw error;}else{cov_thxyporjj().b[2][1]++;}cov_thxyporjj().s[26]++;return{id:request.params.id};});cov_thxyporjj().s[27]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0b2RvUm91dGVzIiwiYXBwIiwib3B0cyIsIm5leHQiLCJwb3N0Iiwic2NoZW1hIiwiYm9keSIsInRvZG9JbnB1dFNjaGVtYSIsImNyZWF0ZVRvZG8iLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImluc2VydE9uZSIsImNvZGUiLCJpZCIsImluc2VydGVkSWQiLCJnZXQiLCJyZWFkVG9kb3MiLCJkb2NzIiwiZmluZCIsInRvQXJyYXkiLCJwdXQiLCJwYXJhbXMiLCJ0b2RvSWRTY2hlbWEiLCJ0b2RvVXBkYXRlU2NoZW1hIiwidXBkYXRlVG9kbyIsInVwZGF0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiJHNldCIsImRvbmUiLCJkb25lQXQiLCJEYXRlIiwibWF0Y2hlZENvdW50IiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsImRlbGV0ZSIsImRlbGV0ZVRvZG8iLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiXSwic291cmNlcyI6WyJyb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NoZW1hcyA9IHJlcXVpcmUoXCIuL3NjaGVtYVwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9kb1JvdXRlcyhhcHAsIG9wdHMsIG5leHQpIHtcbiAgYXBwLnBvc3QoXG4gICAgXCIvYXBpL2dob3N0XCIsXG4gICAge1xuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIGJvZHk6IHNjaGVtYXMudG9kb0lucHV0U2NoZW1hLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRvZG8ocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IGFwcC5tb25nby5kYi5jb2xsZWN0aW9uKFwidXNlcnNcIik7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b2Rvc0NvbGxlY3Rpb24uaW5zZXJ0T25lKHJlcXVlc3QuYm9keSk7XG4gICAgICByZXBseS5jb2RlKDIwMSk7XG4gICAgICByZXR1cm4geyBpZDogcmVzdWx0Lmluc2VydGVkSWQgfTtcbiAgICB9XG4gICk7XG5cbiAgYXBwLmdldChcIi9hcGkvZ2hvc3RcIiwgYXN5bmMgZnVuY3Rpb24gcmVhZFRvZG9zKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICBjb25zdCBkb2NzID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KCk7XG4gICAgLy8gcmV0dXJuIGRvY3MubWFwKGQgPT5cbiAgICAvLyAgIC8vIHJlbW92ZSB0aGUgX2lkIGZpZWxkIGFuZCBuYW1lIGl0IGFzIGlkXG4gICAgLy8gICBkLmlkID0gZC5faWQudG9TdHJpbmcoKVxuICAgIC8vICAgcmV0dXJuIGRcbiAgICByZXR1cm4gZG9jcztcbiAgfSk7XG5cbiAgYXBwLnB1dChcbiAgICBcIi9hcGkvZ2hvc3QvOmlkXCIsXG4gICAge1xuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIHBhcmFtczogc2NoZW1hcy50b2RvSWRTY2hlbWEsXG4gICAgICAgIGJvZHk6IHNjaGVtYXMudG9kb1VwZGF0ZVNjaGVtYSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVUb2RvKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB0b2Rvc0NvbGxlY3Rpb24gPSBhcHAubW9uZ28uZGIuY29sbGVjdGlvbihcInVzZXJzXCIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgeyBfaWQ6IHRoaXMubW9uZ28uT2JqZWN0SWQocmVxdWVzdC5wYXJhbXMuaWQpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICBkb25lOiByZXF1ZXN0LmJvZHkuZG9uZSxcbiAgICAgICAgICAgIGRvbmVBdDogcmVxdWVzdC5ib2R5LmRvbmUgPT09IHRydWUgPyBuZXcgRGF0ZSgpIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICAvLyByZXR1cm5zIDQwNCBpcyB0aGUgdG9kbyBpcyBub3QgZm91bmRcbiAgICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZDogXCIgKyByZXF1ZXN0LnBhcmFtcy5pZCk7XG4gICAgICAgIGVycm9yLnN0YXR1cyA9IDQwNDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBpZDogcmVxdWVzdC5wYXJhbXMuaWQgfTtcbiAgICB9XG4gICk7XG5cbiAgYXBwLmRlbGV0ZShcbiAgICBcIi9hcGkvZ2hvc3QvOmlkXCIsXG4gICAge1xuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIHBhcmFtczogc2NoZW1hcy50b2RvSWRTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gdGhpcy5tb25nby5kYi5jb2xsZWN0aW9uKFwidXNlcnNcIik7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b2Rvc0NvbGxlY3Rpb24uZGVsZXRlT25lKHtcbiAgICAgICAgX2lkOiB0aGlzLm1vbmdvLk9iamVjdElkKHJlcXVlc3QucGFyYW1zLmlkKSxcbiAgICAgIH0pO1xuICAgICAgaWYgKHJlc3VsdC5kZWxldGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kOiBcIiArIHJlcXVlc3QucGFyYW1zLmlkKTtcbiAgICAgICAgZXJyb3Iuc3RhdHVzID0gNDA0O1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGlkOiByZXF1ZXN0LnBhcmFtcy5pZCB9O1xuICAgIH1cbiAgKTtcblxuICBuZXh0KCk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOHBIQWVZO3lGQWZaLEtBQU1BLFFBQU8seUJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBYixDLHVCQUNBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsUUFBU0MsV0FBVCxDQUFvQkMsR0FBcEIsQ0FBeUJDLElBQXpCLENBQStCQyxJQUEvQixDQUFxQywrQ0FDcERGLEdBQUcsQ0FBQ0csSUFBSixDQUNFLFlBREYsQ0FFRSxDQUNFQyxNQUFNLENBQUUsQ0FDTkMsSUFBSSxDQUFFVixPQUFPLENBQUNXLGVBRFIsQ0FEVixDQUZGLENBT0UsY0FBZUMsV0FBZixDQUEwQkMsT0FBMUIsQ0FBbUNDLEtBQW5DLENBQTBDLHdCQUN4QyxLQUFNQyxnQkFBZSx5QkFBR1YsR0FBRyxDQUFDVyxLQUFKLENBQVVDLEVBQVYsQ0FBYUMsVUFBYixDQUF3QixPQUF4QixDQUFILENBQXJCLENBQ0EsS0FBTUMsT0FBTSx5QkFBRyxLQUFNSixnQkFBZSxDQUFDSyxTQUFoQixDQUEwQlAsT0FBTyxDQUFDSCxJQUFsQyxDQUFULENBQVosQ0FGd0MsdUJBR3hDSSxLQUFLLENBQUNPLElBQU4sQ0FBVyxHQUFYLEVBSHdDLHVCQUl4QyxNQUFPLENBQUVDLEVBQUUsQ0FBRUgsTUFBTSxDQUFDSSxVQUFiLENBQVAsQ0FDRCxDQVpILEVBRG9ELHVCQWdCcERsQixHQUFHLENBQUNtQixHQUFKLENBQVEsWUFBUixDQUFzQixjQUFlQyxVQUFmLENBQXlCWixPQUF6QixDQUFrQ0MsS0FBbEMsQ0FBeUMsd0JBQzdELEtBQU1DLGdCQUFlLHlCQUFHVixHQUFHLENBQUNXLEtBQUosQ0FBVUMsRUFBVixDQUFhQyxVQUFiLENBQXdCLE9BQXhCLENBQUgsQ0FBckIsQ0FDQSxLQUFN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