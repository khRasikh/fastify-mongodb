function cov_298m4u3v2y(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/extendEntity/updateController.js";var hash="0bd8c1a6c6e2aaf0502015dd1b09a6a746403d9f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/extendEntity/updateController.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:33,column:2}},"2":{start:{line:3,column:2},end:{line:31,column:4}},"3":{start:{line:12,column:30},end:{line:12,column:62}},"4":{start:{line:13,column:21},end:{line:21,column:7}},"5":{start:{line:24,column:6},end:{line:28,column:7}},"6":{start:{line:25,column:22},end:{line:25,column:73}},"7":{start:{line:26,column:8},end:{line:26,column:27}},"8":{start:{line:27,column:8},end:{line:27,column:20}},"9":{start:{line:29,column:6},end:{line:29,column:39}},"10":{start:{line:32,column:2},end:{line:32,column:9}}},fnMap:{"0":{name:"todoRoutes",decl:{start:{line:2,column:26},end:{line:2,column:36}},loc:{start:{line:2,column:54},end:{line:33,column:1}},line:2},"1":{name:"updateTodo",decl:{start:{line:11,column:19},end:{line:11,column:29}},loc:{start:{line:11,column:46},end:{line:30,column:5}},line:11}},branchMap:{"0":{loc:{start:{line:18,column:20},end:{line:18,column:66}},type:"cond-expr",locations:[{start:{line:18,column:49},end:{line:18,column:59}},{start:{line:18,column:62},end:{line:18,column:66}}],line:18},"1":{loc:{start:{line:24,column:6},end:{line:28,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:28,column:7}},{start:{line:24,column:6},end:{line:28,column:7}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0bd8c1a6c6e2aaf0502015dd1b09a6a746403d9f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_298m4u3v2y=function(){return actualCoverage;};}return actualCoverage;}cov_298m4u3v2y();const schemas=(cov_298m4u3v2y().s[0]++,require("../schema"));cov_298m4u3v2y().s[1]++;module.exports=function todoRoutes(app,opts,next){cov_298m4u3v2y().f[0]++;cov_298m4u3v2y().s[2]++;app.put("/api/ghost/update/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_298m4u3v2y().f[1]++;const todosCollection=(cov_298m4u3v2y().s[3]++,app.mongo.db.collection("users"));const result=(cov_298m4u3v2y().s[4]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_298m4u3v2y().b[0][0]++,new Date()):(cov_298m4u3v2y().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_298m4u3v2y().s[5]++;if(result.matchedCount===0){cov_298m4u3v2y().b[1][0]++;const error=(cov_298m4u3v2y().s[6]++,new Error("Object not found: "+request.params.id));cov_298m4u3v2y().s[7]++;error.status=404;cov_298m4u3v2y().s[8]++;throw error;}else{cov_298m4u3v2y().b[1][1]++;}cov_298m4u3v2y().s[9]++;return{id:request.params.id};});cov_298m4u3v2y().s[10]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0b2RvUm91dGVzIiwiYXBwIiwib3B0cyIsIm5leHQiLCJwdXQiLCJzY2hlbWEiLCJwYXJhbXMiLCJ0b2RvSWRTY2hlbWEiLCJib2R5IiwidG9kb1VwZGF0ZVNjaGVtYSIsInVwZGF0ZVRvZG8iLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsInVwZGF0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiaWQiLCIkc2V0IiwiZG9uZSIsImRvbmVBdCIsIkRhdGUiLCJtYXRjaGVkQ291bnQiLCJlcnJvciIsIkVycm9yIiwic3RhdHVzIl0sInNvdXJjZXMiOlsidXBkYXRlQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzY2hlbWFzID0gcmVxdWlyZShcIi4uL3NjaGVtYVwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9kb1JvdXRlcyhhcHAsIG9wdHMsIG5leHQpIHtcbiAgYXBwLnB1dChcbiAgICBcIi9hcGkvZ2hvc3QvdXBkYXRlLzppZFwiLFxuICAgIHtcbiAgICAgIHNjaGVtYToge1xuICAgICAgICBwYXJhbXM6IHNjaGVtYXMudG9kb0lkU2NoZW1hLFxuICAgICAgICBib2R5OiBzY2hlbWFzLnRvZG9VcGRhdGVTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgIHsgX2lkOiB0aGlzLm1vbmdvLk9iamVjdElkKHJlcXVlc3QucGFyYW1zLmlkKSB9LFxuICAgICAgICB7XG4gICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgZG9uZTogcmVxdWVzdC5ib2R5LmRvbmUsXG4gICAgICAgICAgICBkb25lQXQ6IHJlcXVlc3QuYm9keS5kb25lID09PSB0cnVlID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgLy8gcmV0dXJucyA0MDQgaXMgdGhlIHRvZG8gaXMgbm90IGZvdW5kXG4gICAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQ6IFwiICsgcmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MDQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaWQ6IHJlcXVlc3QucGFyYW1zLmlkIH07XG4gICAgfVxuICApO1xuICBuZXh0KCk7XG59O1xuIl0sIm1hcHBpbmdzIjoibWhFQWVZOzJGQWZaLEtBQU1BLFFBQU8sMEJBQUdDLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBYixDLHdCQUNBQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsUUFBU0MsV0FBVCxDQUFvQkMsR0FBcEIsQ0FBeUJDLElBQXpCLENBQStCQyxJQUEvQixDQUFxQyxpREFDcERGLEdBQUcsQ0FBQ0csR0FBSixDQUNFLHVCQURGLENBRUUsQ0FDRUMsTUFBTSxDQUFFLENBQ05DLE1BQU0sQ0FBRVYsT0FBTyxDQUFDVyxZQURWLENBRU5DLElBQUksQ0FBRVosT0FBTyxDQUFDYSxnQkFGUixDQURWLENBRkYsQ0FRRSxjQUFlQyxXQUFmLENBQTBCQyxPQUExQixDQUFtQ0MsS0FBbkMsQ0FBMEMseUJBQ3hDLEtBQU1DLGdCQUFlLDBCQUFHWixHQUFHLENBQUNhLEtBQUosQ0FBVUMsRUFBVixDQUFhQyxVQUFiLENBQXdCLE9BQXhCLENBQUgsQ0FBckIsQ0FDQSxLQUFNQyxPQUFNLDBCQUFHLEtBQU1KLGdCQUFlLENBQUNLLFNBQWhCLENBQ25CLENBQUVDLEdBQUcsQ0FBRSxLQUFLTCxLQUFMLENBQVdNLFFBQVgsQ0FBb0JULE9BQU8sQ0FBQ0wsTUFBUixDQUFlZSxFQUFuQyxDQUFQLENBRG1CLENBRW5CLENBQ0VDLElBQUksQ0FBRSxDQUNKQyxJQUFJLENBQUVaLE9BQU8sQ0FBQ0gsSUFBUixDQUFhZSxJQURmLENBRUpDLE1BQU0sQ0FBRWIsT0FBTyxDQUFDSCxJQUFSLENBQWFlLElBQWIsR0FBc0IsSUFBdEIsNkJBQTZCLEdBQUlFLEtBQUosRUFBN0IsOEJBQTBDLElBQTFDLENBRkosQ0FEUixDQUZtQixDQUFULENBQVosQ0FVQTtBQVp3Qyx3QkFheEMsR0FBSVIsTUFBTSxDQUFDUyxZQUFQLEdBQXdCLENBQTVCLENBQStCLDRCQUM3QixLQUFNQyxNQUFLLDBCQUFHLEdBQUlDLE1BQUosQ0FBVSxxQkFBdUJqQixPQUFPLENBQUNMLE1BQVIsQ0FBZWUsRUFBaEQsQ0FBSCxDQUFYLENBRDZCLHdCQUU3Qk0sS0FBSyxDQUFDRSxNQUFOLENBQWUsR0FBZixDQUY2Qix3QkFHN0IsS0FBTUYsTUFBTixDQUNELENBSkQsaUNBYndDLHdCQWtCeEMsTUFBTyxDQUFFTixFQUFFLENBQUVWLE9BQU8sQ0FBQ0wsTUFBUixDQUFlZSxFQUFyQixDQUFQLENBQ0QsQ0EzQkgsRUFEb0QseUJBOEJwRGxCLElBQUksR0FDTCxDQS9CRCJ9