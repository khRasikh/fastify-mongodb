function cov_hq6gikev7(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/routes.js";var hash="4a9b8ed73b833d9b24ea1180d34988c4f5cd5952";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/routes.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:2,column:0},end:{line:80,column:2}},"2":{start:{line:3,column:2},end:{line:16,column:4}},"3":{start:{line:11,column:30},end:{line:11,column:62}},"4":{start:{line:12,column:21},end:{line:12,column:66}},"5":{start:{line:13,column:6},end:{line:13,column:22}},"6":{start:{line:14,column:6},end:{line:14,column:39}},"7":{start:{line:18,column:2},end:{line:26,column:5}},"8":{start:{line:19,column:28},end:{line:19,column:60}},"9":{start:{line:20,column:17},end:{line:20,column:55}},"10":{start:{line:25,column:4},end:{line:25,column:16}},"11":{start:{line:28,column:2},end:{line:56,column:4}},"12":{start:{line:37,column:30},end:{line:37,column:62}},"13":{start:{line:38,column:21},end:{line:46,column:7}},"14":{start:{line:49,column:6},end:{line:53,column:7}},"15":{start:{line:50,column:22},end:{line:50,column:73}},"16":{start:{line:51,column:8},end:{line:51,column:27}},"17":{start:{line:52,column:8},end:{line:52,column:20}},"18":{start:{line:54,column:6},end:{line:54,column:39}},"19":{start:{line:58,column:2},end:{line:77,column:4}},"20":{start:{line:66,column:30},end:{line:66,column:63}},"21":{start:{line:67,column:21},end:{line:69,column:8}},"22":{start:{line:70,column:6},end:{line:74,column:7}},"23":{start:{line:71,column:22},end:{line:71,column:73}},"24":{start:{line:72,column:8},end:{line:72,column:27}},"25":{start:{line:73,column:8},end:{line:73,column:20}},"26":{start:{line:75,column:6},end:{line:75,column:39}},"27":{start:{line:79,column:2},end:{line:79,column:9}}},fnMap:{"0":{name:"todoRoutes",decl:{start:{line:2,column:26},end:{line:2,column:36}},loc:{start:{line:2,column:54},end:{line:80,column:1}},line:2},"1":{name:"createTodo",decl:{start:{line:10,column:19},end:{line:10,column:29}},loc:{start:{line:10,column:46},end:{line:15,column:5}},line:10},"2":{name:"readTodos",decl:{start:{line:18,column:35},end:{line:18,column:44}},loc:{start:{line:18,column:61},end:{line:26,column:3}},line:18},"3":{name:"updateTodo",decl:{start:{line:36,column:19},end:{line:36,column:29}},loc:{start:{line:36,column:46},end:{line:55,column:5}},line:36},"4":{name:"deleteTodo",decl:{start:{line:65,column:19},end:{line:65,column:29}},loc:{start:{line:65,column:46},end:{line:76,column:5}},line:65}},branchMap:{"0":{loc:{start:{line:43,column:20},end:{line:43,column:66}},type:"cond-expr",locations:[{start:{line:43,column:49},end:{line:43,column:59}},{start:{line:43,column:62},end:{line:43,column:66}}],line:43},"1":{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:49,column:6},end:{line:53,column:7}}],line:49},"2":{loc:{start:{line:70,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:70,column:6},end:{line:74,column:7}},{start:{line:70,column:6},end:{line:74,column:7}}],line:70}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4a9b8ed73b833d9b24ea1180d34988c4f5cd5952"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_hq6gikev7=function(){return actualCoverage;};}return actualCoverage;}cov_hq6gikev7();const schemas=(cov_hq6gikev7().s[0]++,require("./schema"));cov_hq6gikev7().s[1]++;module.exports=function todoRoutes(app,opts,next){cov_hq6gikev7().f[0]++;cov_hq6gikev7().s[2]++;app.post("/todos",{schema:{body:schemas.todoInputSchema}},async function createTodo(request,reply){cov_hq6gikev7().f[1]++;const todosCollection=(cov_hq6gikev7().s[3]++,app.mongo.db.collection("todos"));const result=(cov_hq6gikev7().s[4]++,await todosCollection.insertOne(request.body));cov_hq6gikev7().s[5]++;reply.code(201);cov_hq6gikev7().s[6]++;return{id:result.insertedId};});cov_hq6gikev7().s[7]++;app.get("/todos",async function readTodos(request,reply){cov_hq6gikev7().f[2]++;const todosCollection=(cov_hq6gikev7().s[8]++,app.mongo.db.collection("todos"));const docs=(cov_hq6gikev7().s[9]++,await todosCollection.find().toArray());// return docs.map(d =>
//   // remove the _id field and name it as id
//   d.id = d._id.toString()
//   return d
cov_hq6gikev7().s[10]++;return docs;});cov_hq6gikev7().s[11]++;app.put("/todos/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_hq6gikev7().f[3]++;const todosCollection=(cov_hq6gikev7().s[12]++,app.mongo.db.collection("todos"));const result=(cov_hq6gikev7().s[13]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_hq6gikev7().b[0][0]++,new Date()):(cov_hq6gikev7().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_hq6gikev7().s[14]++;if(result.matchedCount===0){cov_hq6gikev7().b[1][0]++;const error=(cov_hq6gikev7().s[15]++,new Error("Object not found: "+request.params.id));cov_hq6gikev7().s[16]++;error.status=404;cov_hq6gikev7().s[17]++;throw error;}else{cov_hq6gikev7().b[1][1]++;}cov_hq6gikev7().s[18]++;return{id:request.params.id};});cov_hq6gikev7().s[19]++;app.delete("/todos/:id",{schema:{params:schemas.todoIdSchema}},async function deleteTodo(request,reply){cov_hq6gikev7().f[4]++;const todosCollection=(cov_hq6gikev7().s[20]++,this.mongo.db.collection("todos"));const result=(cov_hq6gikev7().s[21]++,await todosCollection.deleteOne({_id:this.mongo.ObjectId(request.params.id)}));cov_hq6gikev7().s[22]++;if(result.deletedCount===0){cov_hq6gikev7().b[2][0]++;const error=(cov_hq6gikev7().s[23]++,new Error("Object not found: "+request.params.id));cov_hq6gikev7().s[24]++;error.status=404;cov_hq6gikev7().s[25]++;throw error;}else{cov_hq6gikev7().b[2][1]++;}cov_hq6gikev7().s[26]++;return{id:request.params.id};});cov_hq6gikev7().s[27]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0b2RvUm91dGVzIiwiYXBwIiwib3B0cyIsIm5leHQiLCJwb3N0Iiwic2NoZW1hIiwiYm9keSIsInRvZG9JbnB1dFNjaGVtYSIsImNyZWF0ZVRvZG8iLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImluc2VydE9uZSIsImNvZGUiLCJpZCIsImluc2VydGVkSWQiLCJnZXQiLCJyZWFkVG9kb3MiLCJkb2NzIiwiZmluZCIsInRvQXJyYXkiLCJwdXQiLCJwYXJhbXMiLCJ0b2RvSWRTY2hlbWEiLCJ0b2RvVXBkYXRlU2NoZW1hIiwidXBkYXRlVG9kbyIsInVwZGF0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiJHNldCIsImRvbmUiLCJkb25lQXQiLCJEYXRlIiwibWF0Y2hlZENvdW50IiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsImRlbGV0ZSIsImRlbGV0ZVRvZG8iLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiXSwic291cmNlcyI6WyJyb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NoZW1hcyA9IHJlcXVpcmUoXCIuL3NjaGVtYVwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9kb1JvdXRlcyhhcHAsIG9wdHMsIG5leHQpIHtcbiAgYXBwLnBvc3QoXG4gICAgXCIvdG9kb3NcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgYm9keTogc2NoZW1hcy50b2RvSW5wdXRTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ0b2Rvc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5pbnNlcnRPbmUocmVxdWVzdC5ib2R5KTtcbiAgICAgIHJlcGx5LmNvZGUoMjAxKTtcbiAgICAgIHJldHVybiB7IGlkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9O1xuICAgIH1cbiAgKTtcblxuICBhcHAuZ2V0KFwiL3RvZG9zXCIsIGFzeW5jIGZ1bmN0aW9uIHJlYWRUb2RvcyhyZXF1ZXN0LCByZXBseSkge1xuICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IGFwcC5tb25nby5kYi5jb2xsZWN0aW9uKFwidG9kb3NcIik7XG4gICAgY29uc3QgZG9jcyA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5maW5kKCkudG9BcnJheSgpO1xuICAgIC8vIHJldHVybiBkb2NzLm1hcChkID0+XG4gICAgLy8gICAvLyByZW1vdmUgdGhlIF9pZCBmaWVsZCBhbmQgbmFtZSBpdCBhcyBpZFxuICAgIC8vICAgZC5pZCA9IGQuX2lkLnRvU3RyaW5nKClcbiAgICAvLyAgIHJldHVybiBkXG4gICAgcmV0dXJuIGRvY3M7XG4gIH0pO1xuXG4gIGFwcC5wdXQoXG4gICAgXCIvdG9kb3MvOmlkXCIsXG4gICAge1xuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIHBhcmFtczogc2NoZW1hcy50b2RvSWRTY2hlbWEsXG4gICAgICAgIGJvZHk6IHNjaGVtYXMudG9kb1VwZGF0ZVNjaGVtYSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVUb2RvKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB0b2Rvc0NvbGxlY3Rpb24gPSBhcHAubW9uZ28uZGIuY29sbGVjdGlvbihcInRvZG9zXCIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgeyBfaWQ6IHRoaXMubW9uZ28uT2JqZWN0SWQocmVxdWVzdC5wYXJhbXMuaWQpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICBkb25lOiByZXF1ZXN0LmJvZHkuZG9uZSxcbiAgICAgICAgICAgIGRvbmVBdDogcmVxdWVzdC5ib2R5LmRvbmUgPT09IHRydWUgPyBuZXcgRGF0ZSgpIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICAvLyByZXR1cm5zIDQwNCBpcyB0aGUgdG9kbyBpcyBub3QgZm91bmRcbiAgICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZDogXCIgKyByZXF1ZXN0LnBhcmFtcy5pZCk7XG4gICAgICAgIGVycm9yLnN0YXR1cyA9IDQwNDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBpZDogcmVxdWVzdC5wYXJhbXMuaWQgfTtcbiAgICB9XG4gICk7XG5cbiAgYXBwLmRlbGV0ZShcbiAgICBcIi90b2Rvcy86aWRcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgcGFyYW1zOiBzY2hlbWFzLnRvZG9JZFNjaGVtYSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhc3luYyBmdW5jdGlvbiBkZWxldGVUb2RvKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB0b2Rvc0NvbGxlY3Rpb24gPSB0aGlzLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ0b2Rvc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5kZWxldGVPbmUoe1xuICAgICAgICBfaWQ6IHRoaXMubW9uZ28uT2JqZWN0SWQocmVxdWVzdC5wYXJhbXMuaWQpLFxuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0LmRlbGV0ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQ6IFwiICsgcmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MDQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaWQ6IHJlcXVlc3QucGFyYW1zLmlkIH07XG4gICAgfVxuICApO1xuXG4gIG5leHQoKTtcbn07XG4iXSwibWFwcGluZ3MiOiJ3bkhBZVk7eUZBZlosS0FBTUEsUUFBTyx5QkFBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFiLEMsdUJBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixRQUFTQyxXQUFULENBQW9CQyxHQUFwQixDQUF5QkMsSUFBekIsQ0FBK0JDLElBQS9CLENBQXFDLCtDQUNwREYsR0FBRyxDQUFDRyxJQUFKLENBQ0UsUUFERixDQUVFLENBQ0VDLE1BQU0sQ0FBRSxDQUNOQyxJQUFJLENBQUVWLE9BQU8sQ0FBQ1csZUFEUixDQURWLENBRkYsQ0FPRSxjQUFlQyxXQUFmLENBQTBCQyxPQUExQixDQUFtQ0MsS0FBbkMsQ0FBMEMsd0JBQ3hDLEtBQU1DLGdCQUFlLHlCQUFHVixHQUFHLENBQUNXLEtBQUosQ0FBVUMsRUFBVixDQUFhQyxVQUFiLENBQXdCLE9BQXhCLENBQUgsQ0FBckIsQ0FDQSxLQUFNQyxPQUFNLHlCQUFHLEtBQU1KLGdCQUFlLENBQUNLLFNBQWhCLENBQTBCUCxPQUFPLENBQUNILElBQWxDLENBQVQsQ0FBWixDQUZ3Qyx1QkFHeENJLEtBQUssQ0FBQ08sSUFBTixDQUFXLEdBQVgsRUFId0MsdUJBSXhDLE1BQU8sQ0FBRUMsRUFBRSxDQUFFSCxNQUFNLENBQUNJLFVBQWIsQ0FBUCxDQUNELENBWkgsRUFEb0QsdUJBZ0JwRGxCLEdBQUcsQ0FBQ21CLEdBQUosQ0FBUSxRQUFSLENBQWtCLGNBQWVDLFVBQWYsQ0FBeUJaLE9BQXpCLENBQWtDQyxLQUFsQyxDQUF5Qyx3QkFDekQsS0FBTUMsZ0JBQWUseUJBQUdWLEdBQUcsQ0FBQ1csS0FBSixDQUFVQyxFQUFWLENBQWFDLFVBQWIsQ0FBd0IsT0FBeEIsQ0FBSCxDQUFyQixDQUNBLEtBQU1RLEtBQUkseUJBQUcsS0FB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