function cov_thxyporjj(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js";var hash="805da2d6ffcafa6bd241e5f6b833c0de55e6b661";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:3,column:26},end:{line:3,column:58}},"2":{start:{line:4,column:17},end:{line:4,column:62}},"3":{start:{line:5,column:2},end:{line:5,column:18}},"4":{start:{line:6,column:2},end:{line:6,column:35}},"5":{start:{line:8,column:0},end:{line:81,column:2}},"6":{start:{line:9,column:2},end:{line:17,column:4}},"7":{start:{line:19,column:2},end:{line:27,column:5}},"8":{start:{line:20,column:28},end:{line:20,column:60}},"9":{start:{line:21,column:17},end:{line:21,column:55}},"10":{start:{line:26,column:4},end:{line:26,column:16}},"11":{start:{line:29,column:2},end:{line:57,column:4}},"12":{start:{line:38,column:30},end:{line:38,column:62}},"13":{start:{line:39,column:21},end:{line:47,column:7}},"14":{start:{line:50,column:6},end:{line:54,column:7}},"15":{start:{line:51,column:22},end:{line:51,column:73}},"16":{start:{line:52,column:8},end:{line:52,column:27}},"17":{start:{line:53,column:8},end:{line:53,column:20}},"18":{start:{line:55,column:6},end:{line:55,column:39}},"19":{start:{line:59,column:2},end:{line:78,column:4}},"20":{start:{line:67,column:30},end:{line:67,column:63}},"21":{start:{line:68,column:21},end:{line:70,column:8}},"22":{start:{line:71,column:6},end:{line:75,column:7}},"23":{start:{line:72,column:22},end:{line:72,column:73}},"24":{start:{line:73,column:8},end:{line:73,column:27}},"25":{start:{line:74,column:8},end:{line:74,column:20}},"26":{start:{line:76,column:6},end:{line:76,column:39}},"27":{start:{line:80,column:2},end:{line:80,column:9}}},fnMap:{"0":{name:"createTodo",decl:{start:{line:2,column:15},end:{line:2,column:25}},loc:{start:{line:2,column:42},end:{line:7,column:1}},line:2},"1":{name:"todoRoutes",decl:{start:{line:8,column:26},end:{line:8,column:36}},loc:{start:{line:8,column:54},end:{line:81,column:1}},line:8},"2":{name:"readTodos",decl:{start:{line:19,column:39},end:{line:19,column:48}},loc:{start:{line:19,column:65},end:{line:27,column:3}},line:19},"3":{name:"updateTodo",decl:{start:{line:37,column:19},end:{line:37,column:29}},loc:{start:{line:37,column:46},end:{line:56,column:5}},line:37},"4":{name:"deleteTodo",decl:{start:{line:66,column:19},end:{line:66,column:29}},loc:{start:{line:66,column:46},end:{line:77,column:5}},line:66}},branchMap:{"0":{loc:{start:{line:44,column:20},end:{line:44,column:66}},type:"cond-expr",locations:[{start:{line:44,column:49},end:{line:44,column:59}},{start:{line:44,column:62},end:{line:44,column:66}}],line:44},"1":{loc:{start:{line:50,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:50,column:6},end:{line:54,column:7}},{start:{line:50,column:6},end:{line:54,column:7}}],line:50},"2":{loc:{start:{line:71,column:6},end:{line:75,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:75,column:7}},{start:{line:71,column:6},end:{line:75,column:7}}],line:71}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"805da2d6ffcafa6bd241e5f6b833c0de55e6b661"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_thxyporjj=function(){return actualCoverage;};}return actualCoverage;}cov_thxyporjj();const schemas=(cov_thxyporjj().s[0]++,require("./schema"));async function createTodo(request,reply){cov_thxyporjj().f[0]++;const todosCollection=(cov_thxyporjj().s[1]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[2]++,await todosCollection.insertOne(request.body));cov_thxyporjj().s[3]++;reply.code(201);cov_thxyporjj().s[4]++;return{id:result.insertedId};}cov_thxyporjj().s[5]++;module.exports=function todoRoutes(app,opts,next){cov_thxyporjj().f[1]++;cov_thxyporjj().s[6]++;app.post("/api/ghost",{schema:{body:schemas.todoInputSchema}},createTodo);cov_thxyporjj().s[7]++;app.get("/api/ghost",async function readTodos(request,reply){cov_thxyporjj().f[2]++;const todosCollection=(cov_thxyporjj().s[8]++,app.mongo.db.collection("users"));const docs=(cov_thxyporjj().s[9]++,await todosCollection.find().toArray());// return docs.map(d =>
//   // remove the _id field and name it as id
//   d.id = d._id.toString()
//   return d
cov_thxyporjj().s[10]++;return docs;});cov_thxyporjj().s[11]++;app.put("/api/ghost/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_thxyporjj().f[3]++;const todosCollection=(cov_thxyporjj().s[12]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[13]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_thxyporjj().b[0][0]++,new Date()):(cov_thxyporjj().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_thxyporjj().s[14]++;if(result.matchedCount===0){cov_thxyporjj().b[1][0]++;const error=(cov_thxyporjj().s[15]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[16]++;error.status=404;cov_thxyporjj().s[17]++;throw error;}else{cov_thxyporjj().b[1][1]++;}cov_thxyporjj().s[18]++;return{id:request.params.id};});cov_thxyporjj().s[19]++;app.delete("/api/ghost/:id",{schema:{params:schemas.todoIdSchema}},async function deleteTodo(request,reply){cov_thxyporjj().f[4]++;const todosCollection=(cov_thxyporjj().s[20]++,this.mongo.db.collection("users"));const result=(cov_thxyporjj().s[21]++,await todosCollection.deleteOne({_id:this.mongo.ObjectId(request.params.id)}));cov_thxyporjj().s[22]++;if(result.deletedCount===0){cov_thxyporjj().b[2][0]++;const error=(cov_thxyporjj().s[23]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[24]++;error.status=404;cov_thxyporjj().s[25]++;throw error;}else{cov_thxyporjj().b[2][1]++;}cov_thxyporjj().s[26]++;return{id:request.params.id};});cov_thxyporjj().s[27]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsImNyZWF0ZVRvZG8iLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJhcHAiLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImluc2VydE9uZSIsImJvZHkiLCJjb2RlIiwiaWQiLCJpbnNlcnRlZElkIiwibW9kdWxlIiwiZXhwb3J0cyIsInRvZG9Sb3V0ZXMiLCJvcHRzIiwibmV4dCIsInBvc3QiLCJzY2hlbWEiLCJ0b2RvSW5wdXRTY2hlbWEiLCJnZXQiLCJyZWFkVG9kb3MiLCJkb2NzIiwiZmluZCIsInRvQXJyYXkiLCJwdXQiLCJwYXJhbXMiLCJ0b2RvSWRTY2hlbWEiLCJ0b2RvVXBkYXRlU2NoZW1hIiwidXBkYXRlVG9kbyIsInVwZGF0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiJHNldCIsImRvbmUiLCJkb25lQXQiLCJEYXRlIiwibWF0Y2hlZENvdW50IiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsImRlbGV0ZSIsImRlbGV0ZVRvZG8iLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiXSwic291cmNlcyI6WyJyb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NoZW1hcyA9IHJlcXVpcmUoXCIuL3NjaGVtYVwiKTtcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRvZG8ocmVxdWVzdCwgcmVwbHkpIHtcbiAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLmluc2VydE9uZShyZXF1ZXN0LmJvZHkpO1xuICByZXBseS5jb2RlKDIwMSk7XG4gIHJldHVybiB7IGlkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0b2RvUm91dGVzKGFwcCwgb3B0cywgbmV4dCkge1xuICBhcHAucG9zdChcbiAgICBcIi9hcGkvZ2hvc3RcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgYm9keTogc2NoZW1hcy50b2RvSW5wdXRTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlVG9kb1xuICApO1xuXG4gIGFwcC5nZXQoXCIvYXBpL2dob3N0XCIsIGFzeW5jIGZ1bmN0aW9uIHJlYWRUb2RvcyhyZXF1ZXN0LCByZXBseSkge1xuICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IGFwcC5tb25nby5kYi5jb2xsZWN0aW9uKFwidXNlcnNcIik7XG4gICAgY29uc3QgZG9jcyA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5maW5kKCkudG9BcnJheSgpO1xuICAgIC8vIHJldHVybiBkb2NzLm1hcChkID0+XG4gICAgLy8gICAvLyByZW1vdmUgdGhlIF9pZCBmaWVsZCBhbmQgbmFtZSBpdCBhcyBpZFxuICAgIC8vICAgZC5pZCA9IGQuX2lkLnRvU3RyaW5nKClcbiAgICAvLyAgIHJldHVybiBkXG4gICAgcmV0dXJuIGRvY3M7XG4gIH0pO1xuXG4gIGFwcC5wdXQoXG4gICAgXCIvYXBpL2dob3N0LzppZFwiLFxuICAgIHtcbiAgICAgIHNjaGVtYToge1xuICAgICAgICBwYXJhbXM6IHNjaGVtYXMudG9kb0lkU2NoZW1hLFxuICAgICAgICBib2R5OiBzY2hlbWFzLnRvZG9VcGRhdGVTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgIHsgX2lkOiB0aGlzLm1vbmdvLk9iamVjdElkKHJlcXVlc3QucGFyYW1zLmlkKSB9LFxuICAgICAgICB7XG4gICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgZG9uZTogcmVxdWVzdC5ib2R5LmRvbmUsXG4gICAgICAgICAgICBkb25lQXQ6IHJlcXVlc3QuYm9keS5kb25lID09PSB0cnVlID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgLy8gcmV0dXJucyA0MDQgaXMgdGhlIHRvZG8gaXMgbm90IGZvdW5kXG4gICAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQ6IFwiICsgcmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MDQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaWQ6IHJlcXVlc3QucGFyYW1zLmlkIH07XG4gICAgfVxuICApO1xuXG4gIGFwcC5kZWxldGUoXG4gICAgXCIvYXBpL2dob3N0LzppZFwiLFxuICAgIHtcbiAgICAgIHNjaGVtYToge1xuICAgICAgICBwYXJhbXM6IHNjaGVtYXMudG9kb0lkU2NoZW1hLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRvZG8ocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IHRoaXMubW9uZ28uZGIuY29sbGVjdGlvbihcInVzZXJzXCIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7XG4gICAgICAgIF9pZDogdGhpcy5tb25nby5PYmplY3RJZChyZXF1ZXN0LnBhcmFtcy5pZCksXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXN1bHQuZGVsZXRlZENvdW50ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZDogXCIgKyByZXF1ZXN0LnBhcmFtcy5pZCk7XG4gICAgICAgIGVycm9yLnN0YXR1cyA9IDQwNDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBpZDogcmVxdWVzdC5wYXJhbXMuaWQgfTtcbiAgICB9XG4gICk7XG5cbiAgbmV4dCgpO1xufTtcbiJdLCJtYXBwaW5ncyI6ImlwSEFlWTt5RkFmWixLQUFNQSxRQUFPLHlCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENBQWIsQ0FDQSxjQUFlQyxXQUFmLENBQTBCQyxPQUExQixDQUFtQ0MsS0FBbkMsQ0FBMEMsd0JBQ3hDLEtBQU1DLGdCQUFlLHlCQUFHQyxHQUFHLENBQUNDLEtBQUosQ0FBVUMsRUFBVixDQUFhQyxVQUFiLENBQXdCLE9BQXhCLENBQUgsQ0FBckIsQ0FDQSxLQUFNQyxPQUFNLHlCQUFHLEtBQU1MLGdCQUFlLENBQUNNLFNBQWhCLENBQTBCUixPQUFPLENBQUNTLElBQWxDLENBQVQsQ0FBWixDQUZ3Qyx1QkFHeENSLEtBQUssQ0FBQ1MsSUFBTixDQUFXLEdBQVgsRUFId0MsdUJBSXhDLE1BQU8sQ0FBRUMsRUFBRSxDQUFFSixNQUFNLENBQUNLLFVBQWIsQ0FBUCxDQUNELEMsdUJBQ0RDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixRQUFTQyxXQUFULENBQW9CWixHQUFwQixDQUF5QmEsSUFBekIsQ0FBK0JDLElBQS9CLENBQXFDLCtDQUNwRGQsR0FBRyxDQUFDZSxJQUFKLENBQ0UsWUFERixDQUVFLENBQ0VDLE1BQU0sQ0FBRSxDQUNOVixJQUFJLENBQUVaLE9BQU8sQ0FBQ3VCLGVBRFIsQ0FEVixDQUZGLENBT0VyQixVQVBGLEVBRG9ELHVCQVdwREksR0FBRyxDQUFDa0IsR0FBSixDQUFRLFlBQVIsQ0FBc0IsY0FBZUMsVUFBZixDQUF5QnRCLE9BQXpCLENBQWtDQyxLQUFsQyxDQUF5Qyx3QkFDN0QsS0FBTUMsZ0JBQWUseUJBQUdDLEdBQUcsQ0FBQ0MsS0FBSixDQUFVQyxFQUFWLENBQWFDLFVBQWIsQ0FBd0IsT0FBeEIsQ0FBSCxDQUFyQixDQUNBLEtBQU1p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