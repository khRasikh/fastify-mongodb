function cov_thxyporjj(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js";var hash="eb1f7df70cbb88ad8acbacf84a6606aff3ea06be";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:2,column:23},end:{line:2,column:65}},"2":{start:{line:3,column:0},end:{line:76,column:2}},"3":{start:{line:4,column:2},end:{line:12,column:4}},"4":{start:{line:14,column:2},end:{line:22,column:5}},"5":{start:{line:15,column:28},end:{line:15,column:60}},"6":{start:{line:16,column:17},end:{line:16,column:55}},"7":{start:{line:21,column:4},end:{line:21,column:16}},"8":{start:{line:24,column:2},end:{line:52,column:4}},"9":{start:{line:33,column:30},end:{line:33,column:62}},"10":{start:{line:34,column:21},end:{line:42,column:7}},"11":{start:{line:45,column:6},end:{line:49,column:7}},"12":{start:{line:46,column:22},end:{line:46,column:73}},"13":{start:{line:47,column:8},end:{line:47,column:27}},"14":{start:{line:48,column:8},end:{line:48,column:20}},"15":{start:{line:50,column:6},end:{line:50,column:39}},"16":{start:{line:54,column:2},end:{line:73,column:4}},"17":{start:{line:62,column:30},end:{line:62,column:63}},"18":{start:{line:63,column:21},end:{line:65,column:8}},"19":{start:{line:66,column:6},end:{line:70,column:7}},"20":{start:{line:67,column:22},end:{line:67,column:73}},"21":{start:{line:68,column:8},end:{line:68,column:27}},"22":{start:{line:69,column:8},end:{line:69,column:20}},"23":{start:{line:71,column:6},end:{line:71,column:39}},"24":{start:{line:75,column:2},end:{line:75,column:9}}},fnMap:{"0":{name:"todoRoutes",decl:{start:{line:3,column:26},end:{line:3,column:36}},loc:{start:{line:3,column:54},end:{line:76,column:1}},line:3},"1":{name:"readTodos",decl:{start:{line:14,column:39},end:{line:14,column:48}},loc:{start:{line:14,column:65},end:{line:22,column:3}},line:14},"2":{name:"updateTodo",decl:{start:{line:32,column:19},end:{line:32,column:29}},loc:{start:{line:32,column:46},end:{line:51,column:5}},line:32},"3":{name:"deleteTodo",decl:{start:{line:61,column:19},end:{line:61,column:29}},loc:{start:{line:61,column:46},end:{line:72,column:5}},line:61}},branchMap:{"0":{loc:{start:{line:39,column:20},end:{line:39,column:66}},type:"cond-expr",locations:[{start:{line:39,column:49},end:{line:39,column:59}},{start:{line:39,column:62},end:{line:39,column:66}}],line:39},"1":{loc:{start:{line:45,column:6},end:{line:49,column:7}},type:"if",locations:[{start:{line:45,column:6},end:{line:49,column:7}},{start:{line:45,column:6},end:{line:49,column:7}}],line:45},"2":{loc:{start:{line:66,column:6},end:{line:70,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:70,column:7}},{start:{line:66,column:6},end:{line:70,column:7}}],line:66}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eb1f7df70cbb88ad8acbacf84a6606aff3ea06be"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_thxyporjj=function(){return actualCoverage;};}return actualCoverage;}cov_thxyporjj();const schemas=(cov_thxyporjj().s[0]++,require("./schema"));const{createTodo}=(cov_thxyporjj().s[1]++,require("./createEntity/createController"));cov_thxyporjj().s[2]++;module.exports=function todoRoutes(app,opts,next){cov_thxyporjj().f[0]++;cov_thxyporjj().s[3]++;app.post("/api/ghost",{schema:{body:schemas.todoInputSchema}},createTodo);cov_thxyporjj().s[4]++;app.get("/api/ghost",async function readTodos(request,reply){cov_thxyporjj().f[1]++;const todosCollection=(cov_thxyporjj().s[5]++,app.mongo.db.collection("users"));const docs=(cov_thxyporjj().s[6]++,await todosCollection.find().toArray());// return docs.map(d =>
//   // remove the _id field and name it as id
//   d.id = d._id.toString()
//   return d
cov_thxyporjj().s[7]++;return docs;});cov_thxyporjj().s[8]++;app.put("/api/ghost/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_thxyporjj().f[2]++;const todosCollection=(cov_thxyporjj().s[9]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[10]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_thxyporjj().b[0][0]++,new Date()):(cov_thxyporjj().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_thxyporjj().s[11]++;if(result.matchedCount===0){cov_thxyporjj().b[1][0]++;const error=(cov_thxyporjj().s[12]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[13]++;error.status=404;cov_thxyporjj().s[14]++;throw error;}else{cov_thxyporjj().b[1][1]++;}cov_thxyporjj().s[15]++;return{id:request.params.id};});cov_thxyporjj().s[16]++;app.delete("/api/ghost/:id",{schema:{params:schemas.todoIdSchema}},async function deleteTodo(request,reply){cov_thxyporjj().f[3]++;const todosCollection=(cov_thxyporjj().s[17]++,this.mongo.db.collection("users"));const result=(cov_thxyporjj().s[18]++,await todosCollection.deleteOne({_id:this.mongo.ObjectId(request.params.id)}));cov_thxyporjj().s[19]++;if(result.deletedCount===0){cov_thxyporjj().b[2][0]++;const error=(cov_thxyporjj().s[20]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[21]++;error.status=404;cov_thxyporjj().s[22]++;throw error;}else{cov_thxyporjj().b[2][1]++;}cov_thxyporjj().s[23]++;return{id:request.params.id};});cov_thxyporjj().s[24]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsImNyZWF0ZVRvZG8iLCJtb2R1bGUiLCJleHBvcnRzIiwidG9kb1JvdXRlcyIsImFwcCIsIm9wdHMiLCJuZXh0IiwicG9zdCIsInNjaGVtYSIsImJvZHkiLCJ0b2RvSW5wdXRTY2hlbWEiLCJnZXQiLCJyZWFkVG9kb3MiLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsImRvY3MiLCJmaW5kIiwidG9BcnJheSIsInB1dCIsInBhcmFtcyIsInRvZG9JZFNjaGVtYSIsInRvZG9VcGRhdGVTY2hlbWEiLCJ1cGRhdGVUb2RvIiwicmVzdWx0IiwidXBkYXRlT25lIiwiX2lkIiwiT2JqZWN0SWQiLCJpZCIsIiRzZXQiLCJkb25lIiwiZG9uZUF0IiwiRGF0ZSIsIm1hdGNoZWRDb3VudCIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXMiLCJkZWxldGUiLCJkZWxldGVUb2RvIiwiZGVsZXRlT25lIiwiZGVsZXRlZENvdW50Il0sInNvdXJjZXMiOlsicm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNjaGVtYXMgPSByZXF1aXJlKFwiLi9zY2hlbWFcIik7XG5jb25zdCB7IGNyZWF0ZVRvZG8gfSA9IHJlcXVpcmUoXCIuL2NyZWF0ZUVudGl0eS9jcmVhdGVDb250cm9sbGVyXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0b2RvUm91dGVzKGFwcCwgb3B0cywgbmV4dCkge1xuICBhcHAucG9zdChcbiAgICBcIi9hcGkvZ2hvc3RcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgYm9keTogc2NoZW1hcy50b2RvSW5wdXRTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlVG9kb1xuICApO1xuXG4gIGFwcC5nZXQoXCIvYXBpL2dob3N0XCIsIGFzeW5jIGZ1bmN0aW9uIHJlYWRUb2RvcyhyZXF1ZXN0LCByZXBseSkge1xuICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IGFwcC5tb25nby5kYi5jb2xsZWN0aW9uKFwidXNlcnNcIik7XG4gICAgY29uc3QgZG9jcyA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5maW5kKCkudG9BcnJheSgpO1xuICAgIC8vIHJldHVybiBkb2NzLm1hcChkID0+XG4gICAgLy8gICAvLyByZW1vdmUgdGhlIF9pZCBmaWVsZCBhbmQgbmFtZSBpdCBhcyBpZFxuICAgIC8vICAgZC5pZCA9IGQuX2lkLnRvU3RyaW5nKClcbiAgICAvLyAgIHJldHVybiBkXG4gICAgcmV0dXJuIGRvY3M7XG4gIH0pO1xuXG4gIGFwcC5wdXQoXG4gICAgXCIvYXBpL2dob3N0LzppZFwiLFxuICAgIHtcbiAgICAgIHNjaGVtYToge1xuICAgICAgICBwYXJhbXM6IHNjaGVtYXMudG9kb0lkU2NoZW1hLFxuICAgICAgICBib2R5OiBzY2hlbWFzLnRvZG9VcGRhdGVTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgIHsgX2lkOiB0aGlzLm1vbmdvLk9iamVjdElkKHJlcXVlc3QucGFyYW1zLmlkKSB9LFxuICAgICAgICB7XG4gICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgZG9uZTogcmVxdWVzdC5ib2R5LmRvbmUsXG4gICAgICAgICAgICBkb25lQXQ6IHJlcXVlc3QuYm9keS5kb25lID09PSB0cnVlID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgLy8gcmV0dXJucyA0MDQgaXMgdGhlIHRvZG8gaXMgbm90IGZvdW5kXG4gICAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQ6IFwiICsgcmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MDQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaWQ6IHJlcXVlc3QucGFyYW1zLmlkIH07XG4gICAgfVxuICApO1xuXG4gIGFwcC5kZWxldGUoXG4gICAgXCIvYXBpL2dob3N0LzppZFwiLFxuICAgIHtcbiAgICAgIHNjaGVtYToge1xuICAgICAgICBwYXJhbXM6IHNjaGVtYXMudG9kb0lkU2NoZW1hLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRvZG8ocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IHRoaXMubW9uZ28uZGIuY29sbGVjdGlvbihcInVzZXJzXCIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9kb3NDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7XG4gICAgICAgIF9pZDogdGhpcy5tb25nby5PYmplY3RJZChyZXF1ZXN0LnBhcmFtcy5pZCksXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXN1bHQuZGVsZXRlZENvdW50ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZDogXCIgKyByZXF1ZXN0LnBhcmFtcy5pZCk7XG4gICAgICAgIGVycm9yLnN0YXR1cyA9IDQwNDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBpZDogcmVxdWVzdC5wYXJhbXMuaWQgfTtcbiAgICB9XG4gICk7XG5cbiAgbmV4dCgpO1xufTtcbiJdLCJtYXBwaW5ncyI6IncwR0FlWTt5RkFmWixLQUFNQSxRQUFPLHlCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENB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