function cov_thxyporjj(){var path="/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js";var hash="51230bd909e643a1bcc4b9a59f165f6c8866a0b1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/rasikh/Desktop/Tap testing/my-fastify-app/nodb-api/functions/routes.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:35}},"1":{start:{line:3,column:0},end:{line:81,column:2}},"2":{start:{line:4,column:2},end:{line:17,column:4}},"3":{start:{line:12,column:30},end:{line:12,column:62}},"4":{start:{line:13,column:21},end:{line:13,column:66}},"5":{start:{line:14,column:6},end:{line:14,column:22}},"6":{start:{line:15,column:6},end:{line:15,column:39}},"7":{start:{line:19,column:2},end:{line:27,column:5}},"8":{start:{line:20,column:28},end:{line:20,column:60}},"9":{start:{line:21,column:17},end:{line:21,column:55}},"10":{start:{line:26,column:4},end:{line:26,column:16}},"11":{start:{line:29,column:2},end:{line:57,column:4}},"12":{start:{line:38,column:30},end:{line:38,column:62}},"13":{start:{line:39,column:21},end:{line:47,column:7}},"14":{start:{line:50,column:6},end:{line:54,column:7}},"15":{start:{line:51,column:22},end:{line:51,column:73}},"16":{start:{line:52,column:8},end:{line:52,column:27}},"17":{start:{line:53,column:8},end:{line:53,column:20}},"18":{start:{line:55,column:6},end:{line:55,column:39}},"19":{start:{line:59,column:2},end:{line:78,column:4}},"20":{start:{line:67,column:30},end:{line:67,column:63}},"21":{start:{line:68,column:21},end:{line:70,column:8}},"22":{start:{line:71,column:6},end:{line:75,column:7}},"23":{start:{line:72,column:22},end:{line:72,column:73}},"24":{start:{line:73,column:8},end:{line:73,column:27}},"25":{start:{line:74,column:8},end:{line:74,column:20}},"26":{start:{line:76,column:6},end:{line:76,column:39}},"27":{start:{line:80,column:2},end:{line:80,column:9}}},fnMap:{"0":{name:"todoRoutes",decl:{start:{line:3,column:26},end:{line:3,column:36}},loc:{start:{line:3,column:54},end:{line:81,column:1}},line:3},"1":{name:"createTodo",decl:{start:{line:11,column:19},end:{line:11,column:29}},loc:{start:{line:11,column:46},end:{line:16,column:5}},line:11},"2":{name:"readTodos",decl:{start:{line:19,column:39},end:{line:19,column:48}},loc:{start:{line:19,column:65},end:{line:27,column:3}},line:19},"3":{name:"updateTodo",decl:{start:{line:37,column:19},end:{line:37,column:29}},loc:{start:{line:37,column:46},end:{line:56,column:5}},line:37},"4":{name:"deleteTodo",decl:{start:{line:66,column:19},end:{line:66,column:29}},loc:{start:{line:66,column:46},end:{line:77,column:5}},line:66}},branchMap:{"0":{loc:{start:{line:44,column:20},end:{line:44,column:66}},type:"cond-expr",locations:[{start:{line:44,column:49},end:{line:44,column:59}},{start:{line:44,column:62},end:{line:44,column:66}}],line:44},"1":{loc:{start:{line:50,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:50,column:6},end:{line:54,column:7}},{start:{line:50,column:6},end:{line:54,column:7}}],line:50},"2":{loc:{start:{line:71,column:6},end:{line:75,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:75,column:7}},{start:{line:71,column:6},end:{line:75,column:7}}],line:71}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"51230bd909e643a1bcc4b9a59f165f6c8866a0b1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_thxyporjj=function(){return actualCoverage;};}return actualCoverage;}cov_thxyporjj();const schemas=(cov_thxyporjj().s[0]++,require("./schema"));cov_thxyporjj().s[1]++;module.exports=function todoRoutes(app,opts,next){cov_thxyporjj().f[0]++;cov_thxyporjj().s[2]++;app.post("/api/ghost",{schema:{body:schemas.todoInputSchema}},async function createTodo(request,reply){cov_thxyporjj().f[1]++;const todosCollection=(cov_thxyporjj().s[3]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[4]++,await todosCollection.insertOne(request.body));cov_thxyporjj().s[5]++;reply.code(201);cov_thxyporjj().s[6]++;return{id:result.insertedId};});cov_thxyporjj().s[7]++;app.get("/api/ghost",async function readTodos(request,reply){cov_thxyporjj().f[2]++;const todosCollection=(cov_thxyporjj().s[8]++,app.mongo.db.collection("users"));const docs=(cov_thxyporjj().s[9]++,await todosCollection.find().toArray());// return docs.map(d =>
//   // remove the _id field and name it as id
//   d.id = d._id.toString()
//   return d
cov_thxyporjj().s[10]++;return docs;});cov_thxyporjj().s[11]++;app.put("/api/ghost/:id",{schema:{params:schemas.todoIdSchema,body:schemas.todoUpdateSchema}},async function updateTodo(request,reply){cov_thxyporjj().f[3]++;const todosCollection=(cov_thxyporjj().s[12]++,app.mongo.db.collection("users"));const result=(cov_thxyporjj().s[13]++,await todosCollection.updateOne({_id:this.mongo.ObjectId(request.params.id)},{$set:{done:request.body.done,doneAt:request.body.done===true?(cov_thxyporjj().b[0][0]++,new Date()):(cov_thxyporjj().b[0][1]++,null)}}));// returns 404 is the todo is not found
cov_thxyporjj().s[14]++;if(result.matchedCount===0){cov_thxyporjj().b[1][0]++;const error=(cov_thxyporjj().s[15]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[16]++;error.status=404;cov_thxyporjj().s[17]++;throw error;}else{cov_thxyporjj().b[1][1]++;}cov_thxyporjj().s[18]++;return{id:request.params.id};});cov_thxyporjj().s[19]++;app.delete("/api/ghost/:id",{schema:{params:schemas.todoIdSchema}},async function deleteTodo(request,reply){cov_thxyporjj().f[4]++;const todosCollection=(cov_thxyporjj().s[20]++,this.mongo.db.collection("users"));const result=(cov_thxyporjj().s[21]++,await todosCollection.deleteOne({_id:this.mongo.ObjectId(request.params.id)}));cov_thxyporjj().s[22]++;if(result.deletedCount===0){cov_thxyporjj().b[2][0]++;const error=(cov_thxyporjj().s[23]++,new Error("Object not found: "+request.params.id));cov_thxyporjj().s[24]++;error.status=404;cov_thxyporjj().s[25]++;throw error;}else{cov_thxyporjj().b[2][1]++;}cov_thxyporjj().s[26]++;return{id:request.params.id};});cov_thxyporjj().s[27]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2hlbWFzIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0b2RvUm91dGVzIiwiYXBwIiwib3B0cyIsIm5leHQiLCJwb3N0Iiwic2NoZW1hIiwiYm9keSIsInRvZG9JbnB1dFNjaGVtYSIsImNyZWF0ZVRvZG8iLCJyZXF1ZXN0IiwicmVwbHkiLCJ0b2Rvc0NvbGxlY3Rpb24iLCJtb25nbyIsImRiIiwiY29sbGVjdGlvbiIsInJlc3VsdCIsImluc2VydE9uZSIsImNvZGUiLCJpZCIsImluc2VydGVkSWQiLCJnZXQiLCJyZWFkVG9kb3MiLCJkb2NzIiwiZmluZCIsInRvQXJyYXkiLCJwdXQiLCJwYXJhbXMiLCJ0b2RvSWRTY2hlbWEiLCJ0b2RvVXBkYXRlU2NoZW1hIiwidXBkYXRlVG9kbyIsInVwZGF0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiJHNldCIsImRvbmUiLCJkb25lQXQiLCJEYXRlIiwibWF0Y2hlZENvdW50IiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsImRlbGV0ZSIsImRlbGV0ZVRvZG8iLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiXSwic291cmNlcyI6WyJyb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NoZW1hcyA9IHJlcXVpcmUoXCIuL3NjaGVtYVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0b2RvUm91dGVzKGFwcCwgb3B0cywgbmV4dCkge1xuICBhcHAucG9zdChcbiAgICBcIi9hcGkvZ2hvc3RcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgYm9keTogc2NoZW1hcy50b2RvSW5wdXRTY2hlbWEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVG9kbyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdG9kb3NDb2xsZWN0aW9uID0gYXBwLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5pbnNlcnRPbmUocmVxdWVzdC5ib2R5KTtcbiAgICAgIHJlcGx5LmNvZGUoMjAxKTtcbiAgICAgIHJldHVybiB7IGlkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9O1xuICAgIH1cbiAgKTtcblxuICBhcHAuZ2V0KFwiL2FwaS9naG9zdFwiLCBhc3luYyBmdW5jdGlvbiByZWFkVG9kb3MocmVxdWVzdCwgcmVwbHkpIHtcbiAgICBjb25zdCB0b2Rvc0NvbGxlY3Rpb24gPSBhcHAubW9uZ28uZGIuY29sbGVjdGlvbihcInVzZXJzXCIpO1xuICAgIGNvbnN0IGRvY3MgPSBhd2FpdCB0b2Rvc0NvbGxlY3Rpb24uZmluZCgpLnRvQXJyYXkoKTtcbiAgICAvLyByZXR1cm4gZG9jcy5tYXAoZCA9PlxuICAgIC8vICAgLy8gcmVtb3ZlIHRoZSBfaWQgZmllbGQgYW5kIG5hbWUgaXQgYXMgaWRcbiAgICAvLyAgIGQuaWQgPSBkLl9pZC50b1N0cmluZygpXG4gICAgLy8gICByZXR1cm4gZFxuICAgIHJldHVybiBkb2NzO1xuICB9KTtcblxuICBhcHAucHV0KFxuICAgIFwiL2FwaS9naG9zdC86aWRcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgcGFyYW1zOiBzY2hlbWFzLnRvZG9JZFNjaGVtYSxcbiAgICAgICAgYm9keTogc2NoZW1hcy50b2RvVXBkYXRlU2NoZW1hLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRvZG8ocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IHRvZG9zQ29sbGVjdGlvbiA9IGFwcC5tb25nby5kYi5jb2xsZWN0aW9uKFwidXNlcnNcIik7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b2Rvc0NvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgICB7IF9pZDogdGhpcy5tb25nby5PYmplY3RJZChyZXF1ZXN0LnBhcmFtcy5pZCkgfSxcbiAgICAgICAge1xuICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgIGRvbmU6IHJlcXVlc3QuYm9keS5kb25lLFxuICAgICAgICAgICAgZG9uZUF0OiByZXF1ZXN0LmJvZHkuZG9uZSA9PT0gdHJ1ZSA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIHJldHVybnMgNDA0IGlzIHRoZSB0b2RvIGlzIG5vdCBmb3VuZFxuICAgICAgaWYgKHJlc3VsdC5tYXRjaGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kOiBcIiArIHJlcXVlc3QucGFyYW1zLmlkKTtcbiAgICAgICAgZXJyb3Iuc3RhdHVzID0gNDA0O1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGlkOiByZXF1ZXN0LnBhcmFtcy5pZCB9O1xuICAgIH1cbiAgKTtcblxuICBhcHAuZGVsZXRlKFxuICAgIFwiL2FwaS9naG9zdC86aWRcIixcbiAgICB7XG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgcGFyYW1zOiBzY2hlbWFzLnRvZG9JZFNjaGVtYSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhc3luYyBmdW5jdGlvbiBkZWxldGVUb2RvKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB0b2Rvc0NvbGxlY3Rpb24gPSB0aGlzLm1vbmdvLmRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvZG9zQ29sbGVjdGlvbi5kZWxldGVPbmUoe1xuICAgICAgICBfaWQ6IHRoaXMubW9uZ28uT2JqZWN0SWQocmVxdWVzdC5wYXJhbXMuaWQpLFxuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0LmRlbGV0ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQ6IFwiICsgcmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MDQ7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaWQ6IHJlcXVlc3QucGFyYW1zLmlkIH07XG4gICAgfVxuICApO1xuXG4gIG5leHQoKTtcbn07XG4iXSwibWFwcGluZ3MiOiI4cEhBZVk7eUZBZlosS0FBTUEsUUFBTyx5QkFBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFiLEMsdUJBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixRQUFTQyxXQUFULENBQW9CQyxHQUFwQixDQUF5QkMsSUFBekIsQ0FBK0JDLElBQS9CLENBQXFDLCtDQUNwREYsR0FBRyxDQUFDRyxJQUFKLENBQ0UsWUFERixDQUVFLENBQ0VDLE1BQU0sQ0FBRSxDQUNOQyxJQUFJLENBQUVWLE9BQU8sQ0FBQ1csZUFEUixDQURWLENBRkYsQ0FPRSxjQUFlQyxXQUFmLENBQTBCQyxPQUExQixDQUFtQ0MsS0FBbkMsQ0FBMEMsd0JBQ3hDLEtBQU1DLGdCQUFlLHlCQUFHVixHQUFHLENBQUNXLEtBQUosQ0FBVUMsRUFBVixDQUFhQyxVQUFiLENBQXdCLE9BQXhCLENBQUgsQ0FBckIsQ0FDQSxLQUFNQyxPQUFNLHlCQUFHLEtBQU1KLGdCQUFlLENBQUNLLFNBQWhCLENBQTBCUCxPQUFPLENBQUNILElBQWxDLENBQVQsQ0FBWixDQUZ3Qyx1QkFHeENJLEtBQUssQ0FBQ08sSUFBTixDQUFXLEdBQVgsRUFId0MsdUJBSXhDLE1BQU8sQ0FBRUMsRUFBRSxDQUFFSCxNQUFNLENBQUNJLFVBQWIsQ0FBUCxDQUNELENBWkgsRUFEb0QsdUJBZ0JwRGxCLEdBQUcsQ0FBQ21CLEdBQUosQ0FBUSxZQUFSLENBQXNCLGNBQWVDLFVBQWYsQ0FBeUJaLE9BQXpCLENBQWtDQyxLQUFsQyxDQUF5Qyx3QkFDN0QsS0FBTUMsZ0JBQWUseUJBQUdWLEdBQUcsQ0FBQ1csS0FBSixDQUFVQyxFQUFWLENBQWFDLFVBQWIsQ0FBd0IsT0FBeEIsQ0FBSCxDQUFyQixDQUNBLEtB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